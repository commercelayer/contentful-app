var w=this&&this.__classPrivateFieldSet||function(s,t,r,e,a){if(e==="m")throw new TypeError("Private method is not writable");if(e==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?s!==t||!a:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e==="a"?a.call(s,r):a?a.value=r:t.set(s,r),r},d=this&&this.__classPrivateFieldGet||function(s,t,r,e){if(r==="a"&&!e)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?s!==t||!e:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?e:r==="a"?e.call(s):e?e.value:t.get(s)},n,h;import y from"./client";import{denormalize as l,normalize as m}from"./jsonapi";import{generateQueryStringParams as o}from"./query";import g from"./config";class b extends Array{constructor(t,r){super(...r||[]);this.meta=t}first(){return this.length?this[0]:void 0}last(){return this.length?this[this.length-1]:void 0}get(t){return this.length&&t>=0?this[t]:void 0}}class p{constructor(t){n.set(this,void 0),h.set(this,{}),w(this,n,y.create(t),"f"),this.config(t)}get interceptors(){return d(this,n,"f").interceptors}config(t){!t||d(this,n,"f").config(t)}async singleton(t,r,e){const a=o(r);(e==null?void 0:e.params)&&Object.assign(a,e==null?void 0:e.params);const i=await d(this,n,"f").request("get",`${t.type}`,void 0,Object.assign(Object.assign({},e),{params:a}));return l(i)}async retrieve(t,r,e){const a=o(r);(e==null?void 0:e.params)&&Object.assign(a,e==null?void 0:e.params);const i=await d(this,n,"f").request("get",`${t.type}/${t.id}`,void 0,Object.assign(Object.assign({},e),{params:a}));return l(i)}async list(t,r,e){var a,i;const c=o(r);(e==null?void 0:e.params)&&Object.assign(c,e==null?void 0:e.params);const u=await d(this,n,"f").request("get",`${t.type}`,void 0,Object.assign(Object.assign({},e),{params:c})),f=l(u),v={pageCount:Number((a=u.meta)===null||a===void 0?void 0:a.page_count),recordCount:Number((i=u.meta)===null||i===void 0?void 0:i.record_count),currentPage:(r==null?void 0:r.pageNumber)||g.default.pageNumber,recordsPerPage:(r==null?void 0:r.pageSize)||g.default.pageSize};return new b(v,f)}async create(t,r,e){const a=o(r);(e==null?void 0:e.params)&&Object.assign(a,e==null?void 0:e.params);const i=m(t),c=await d(this,n,"f").request("post",t.type,i,Object.assign(Object.assign({},e),{params:a}));return l(c)}async update(t,r,e){const a=o(r);(e==null?void 0:e.params)&&Object.assign(a,e==null?void 0:e.params);const i=m(t),c=await d(this,n,"f").request("patch",`${t.type}/${t.id}`,i,Object.assign(Object.assign({},e),{params:a}));return l(c)}async delete(t,r){await d(this,n,"f").request("delete",`${t.type}/${t.id}`,void 0,r)}}n=new WeakMap,h=new WeakMap;class j{constructor(t){this.resources=t}}export default p;export{j as ApiResource};