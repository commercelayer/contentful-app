"use strict";var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(i,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(i,t):s?s.value=t:e.set(i,t),t},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)},_QueryBuilderRetrieve_resource,_QueryBuilderRetrieve_include,_QueryBuilderRetrieve_fields,_QueryBuilderList_sort,_QueryBuilderList_filters,_QueryBuilderList_pageNumber,_QueryBuilderList_pageSize;Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateQueryStringParams=exports.QueryBuilderList=exports.QueryBuilderRetrieve=void 0;const isParamsList=i=>i.filters||i.pageNumber||i.pageSize||i.sort;class QueryBuilderRetrieve{constructor(e){_QueryBuilderRetrieve_resource.set(this,void 0),_QueryBuilderRetrieve_include.set(this,void 0),_QueryBuilderRetrieve_fields.set(this,void 0),__classPrivateFieldSet(this,_QueryBuilderRetrieve_resource,e||"","f")}include(...e){return __classPrivateFieldGet(this,_QueryBuilderRetrieve_include,"f")||__classPrivateFieldSet(this,_QueryBuilderRetrieve_include,[],"f"),__classPrivateFieldGet(this,_QueryBuilderRetrieve_include,"f").push(...e),this}field(e,t){return __classPrivateFieldGet(this,_QueryBuilderRetrieve_fields,"f")||__classPrivateFieldSet(this,_QueryBuilderRetrieve_fields,{},"f"),t||(t=__classPrivateFieldGet(this,_QueryBuilderRetrieve_resource,"f")),__classPrivateFieldGet(this,_QueryBuilderRetrieve_fields,"f")[t]||(__classPrivateFieldGet(this,_QueryBuilderRetrieve_fields,"f")[t]=[]),__classPrivateFieldGet(this,_QueryBuilderRetrieve_fields,"f")[t].push(e),this}fields(e,t){return e.forEach(r=>{this.field(r,t)}),this}clear(){return __classPrivateFieldSet(this,_QueryBuilderRetrieve_include,void 0,"f"),__classPrivateFieldSet(this,_QueryBuilderRetrieve_fields,void 0,"f"),this}build(){return{include:__classPrivateFieldGet(this,_QueryBuilderRetrieve_include,"f"),fields:__classPrivateFieldGet(this,_QueryBuilderRetrieve_fields,"f")}}generate(){return generateQueryStringParams(this.build())}}exports.QueryBuilderRetrieve=QueryBuilderRetrieve,_QueryBuilderRetrieve_resource=new WeakMap,_QueryBuilderRetrieve_include=new WeakMap,_QueryBuilderRetrieve_fields=new WeakMap;class QueryBuilderList extends QueryBuilderRetrieve{constructor(e){super(e);_QueryBuilderList_sort.set(this,void 0),_QueryBuilderList_filters.set(this,void 0),_QueryBuilderList_pageNumber.set(this,void 0),_QueryBuilderList_pageSize.set(this,void 0)}include(...e){return super.include(...e)}field(e,t){return super.field(e,t)}fields(e,t){return super.fields(e,t)}pageNumber(e){return __classPrivateFieldSet(this,_QueryBuilderList_pageNumber,e,"f"),this}pageSize(e){return __classPrivateFieldSet(this,_QueryBuilderList_pageSize,e,"f"),this}page(e,t){return __classPrivateFieldSet(this,_QueryBuilderList_pageNumber,e,"f"),__classPrivateFieldSet(this,_QueryBuilderList_pageSize,t,"f"),this}sort(e,t){return __classPrivateFieldGet(this,_QueryBuilderList_sort,"f")||__classPrivateFieldSet(this,_QueryBuilderList_sort,[],"f"),__classPrivateFieldGet(this,_QueryBuilderList_sort,"f").push(`${t?"-":""}${e}`),this}filter(e,t,r,s){__classPrivateFieldGet(this,_QueryBuilderList_filters,"f")||__classPrivateFieldSet(this,_QueryBuilderList_filters,{},"f");const n=s?`${s}_`:"";return __classPrivateFieldGet(this,_QueryBuilderList_filters,"f")[`${Array.isArray(e)?e.map(u=>`${n}${u}`).join("_or_"):n+e}_${t}`]=Array.isArray(r)?r.join(","):r,this}clear(){return super.clear(),__classPrivateFieldSet(this,_QueryBuilderList_sort,void 0,"f"),__classPrivateFieldSet(this,_QueryBuilderList_filters,void 0,"f"),__classPrivateFieldSet(this,_QueryBuilderList_pageNumber,void 0,"f"),__classPrivateFieldSet(this,_QueryBuilderList_pageSize,void 0,"f"),this}build(){return Object.assign(super.build(),{sort:__classPrivateFieldGet(this,_QueryBuilderList_sort,"f"),filters:__classPrivateFieldGet(this,_QueryBuilderList_filters,"f"),pageNumber:__classPrivateFieldGet(this,_QueryBuilderList_pageNumber,"f"),pageSize:__classPrivateFieldGet(this,_QueryBuilderList_pageSize,"f")})}generate(){return generateQueryStringParams(this.build())}}exports.QueryBuilderList=QueryBuilderList,_QueryBuilderList_sort=new WeakMap,_QueryBuilderList_filters=new WeakMap,_QueryBuilderList_pageNumber=new WeakMap,_QueryBuilderList_pageSize=new WeakMap;class QueryBuilder extends QueryBuilderList{constructor(e){super(e)}}exports.default=QueryBuilder;const generateQueryStringParams=i=>{const e={};return i&&(i.include&&(e.include=i.include.join(",")),i.fields&&Object.entries(i.fields).forEach(([t,r])=>{e[`fields[${t}]`]=r.join(",")}),isParamsList(i)&&(i.sort&&(Array.isArray(i.sort)?e.sort=i.sort.join(","):e.sort=Object.entries(i.sort).map(([t,r])=>`${r==="desc"?"-":""}${t}`).join(",")),i.pageNumber&&(e["page[number]"]=String(i.pageNumber)),i.pageSize&&(e["page[size]"]=String(i.pageSize)),i.filters&&Object.entries(i.filters).forEach(([t,r])=>{e[`filter[q][${t}]`]=String(r)}))),e};exports.generateQueryStringParams=generateQueryStringParams;